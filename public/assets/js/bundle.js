(function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:false,exports:{}};e[i].call(n.exports,n,n.exports,s);n.l=true;return n.exports}s.m=e;s.c=t;s.i=function(e){return e};s.d=function(e,t,i){if(!s.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:i})}};s.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};s.d(t,"a",t);return t};s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};s.p="";return s(s.s=0)})([function(e,t,s){"use strict";var i={currentStep:"beginning",lifes:3,bonus:0,scenes:["baleine","baleine-transition-1","dori","faille","kidnapping","masque","meduses","meduses-transition-1","meduses-transition-2","pelican","pelican-transition-1","pelican-transition-2","poisson-lune","poisson-lune-transition-1","retrouvailles","tortues"],init:function e(){this.setScenes();this.setLifes();this.setStage();this.setActions()},setScenes:function e(){for(var t=0;t<this.scenes.length;t++){$.get("steps/"+this.scenes[t]+".html",function(e){$("#section-container").append(e)})}},setLifes:function e(){$(".lifes").html("");for(var t=0;t<this.lifes;t++){$(".lifes").append('<img src="/assets/img/nemo.png"/>')}},setActions:function e(){$(document).on("click",".start",function(){document.querySelector("audio").muted=true});$(document).on("click",".replay",this.replay.bind(this));$(document).on("click","button.action",this.toggleStep.bind(this))},toggleStep:function e(t){var s=$(t.target);if(typeof s.data("message")!=="undefined"){this.transition(s.data("message"))}else{this.transitionSimple()}this.currentStep=s.data("step");this.addBonus(s.data("bonus"));setTimeout(function(){typeof s.data("wrong")==="undefined"?i.setStage():i.loseLifeAndSetStage()},1200)},addBonus:function e(t){this.bonus+=t;this.showResult();if(t!==0){$("#bonus-animation").html(""+(t>0?"+":"")+t*10).addClass("animate-point");setTimeout(function(){$("#bonus-animation").removeClass("animate-point")},2e3)}},showResult:function e(){var t="";if(this.bonus<3){t="Vous êtes un très mauvais père ! Vous méritez de mourrir."}else if(this.result<5){t="Vous ne vous êtes pas foulé... Némo mérite mieux que vous !"}else if(this.result<8){t="Mouais, dans la moyenne. On va espèrer que ça ne vous arrive pas quand même..."}else if(this.result<10){t="Ouah pas mal ! Vous êtes un bon père, c'est sûr !"}else{t="Incroyable !! On croirait presque que vous avez triché !!"}$("#result").html(t)},transitionSimple:function e(){$("#overlay").addClass("show");setTimeout(function(){$("#overlay").removeClass("show")},2e3)},transition:function e(t){var s=$("#transition");$("section").removeClass("active");s.addClass("active").find("div").html(t);setTimeout(function(){s.removeClass("active")},3e3)},loseLifeAndSetStage:function e(){this.loseLife();this.setStage()},loseLife:function e(){this.lifes--;this.setLifes();if(this.lifes===0){this.endGame()}},setStage:function e(){var t=$("#"+this.currentStep);$("section").removeClass("active");t.addClass("active");this.addVideo(t);$(".bonus").html(this.bonus*10)},addVideo:function e(t){$("#vid").remove();var s="assets/videos/"+$(t).attr("id")+".mp4";t.css("background-image","url('assets/img/"+i.currentStep+".jpg')");if(t.hasClass("video")){t.prepend('<div><video id="vid" autoplay><source src="'+s+'" type="video/mp4"></video></div>');$("#vid").on("ended click",function(){t.addClass("ended");$(this).parent().addClass("removing");setTimeout(function(){$("#vid").remove()},2e3)})}},endGame:function e(){if(confirm("Tu as perdu ! Rejouer ? ")){this.replay()}},replay:function e(){this.lifes=3;this.bonus=0;this.currentStep="beginning";this.setLifes();this.setStage();this.setActions()}};$(document).ready(function(){i.init()})}]);