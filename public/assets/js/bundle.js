(function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:false,exports:{}};e[n].call(s.exports,s,s.exports,i);s.l=true;return s.exports}i.m=e;i.c=t;i.i=function(e){return e};i.d=function(e,t,n){if(!i.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:n})}};i.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};i.d(t,"a",t);return t};i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};i.p="";return i(i.s=0)})([function(e,t,i){"use strict";var n={currentStep:"beginning",lifes:3,bonus:0,scenes:["baleine","baleine-transition-1","dori","faille","kidnapping","masque","meduses","meduses-transition-1","meduses-transition-2","pelican","pelican-transition-1","pelican-transition-2","poisson-lune","poisson-lune-transition-1","retrouvailles","tortues"],init:function e(){this.setScenes();$(".start").on("click",function(){document.querySelector("audio").muted=true});this.setLifes();this.setStage();this.setActions()},setScenes:function e(){for(var t=0;t<this.scenes.length;t++){$.get("steps/"+this.scenes[t]+".html",function(e){$("#section-container").append(e)})}},setLifes:function e(){$(".lifes").html("");for(var t=0;t<this.lifes;t++){$(".lifes").append("❤️")}},setActions:function e(){$(document).on("click","button.action",this.toggleStep.bind(this))},toggleStep:function e(t){var i=$(t.target);if(typeof i.data("message")!=="undefined"){this.transition(i.data("message"))}else{this.transitionSimple()}this.currentStep=i.data("step");this.bonus+=i.data("bonus");setTimeout(function(){typeof i.data("wrong")==="undefined"?n.setStage():n.loseLifeAndSetStage()},1200)},transitionSimple:function e(){$("#overlay").addClass("show");setTimeout(function(){$("#overlay").removeClass("show")},2e3)},transition:function e(t){var i=$("#transition");$("section").removeClass("active");i.addClass("active").find("div").html(t);setTimeout(function(){i.removeClass("active")},3e3)},loseLifeAndSetStage:function e(){this.loseLife();this.setStage()},loseLife:function e(){this.lifes--;this.setLifes();if(this.lifes===0){this.endGame()}},setStage:function e(){var t=$("#"+this.currentStep);$("section").removeClass("active");t.addClass("active");this.addVideo(t);$(".bonus").html(this.bonus*10+" points")},addVideo:function e(t){$("#vid").remove();var i="assets/videos/"+$(t).attr("id")+".mp4";if(t.hasClass("video")){t.prepend('<video id="vid" autoplay><source src="'+i+'" type="video/mp4"></video>');$("#vid").on("ended click",function(){t.css("background-image","url('assets/img/"+n.currentStep+".jpg')");t.addClass("ended");$(this).remove()})}else{t.css("background-image","url('assets/img/"+this.currentStep+".jpg')")}},endGame:function e(){if(confirm("Tu as perdu ! Rejouer ? ")){this.replay()}},replay:function e(){this.lifes=3;this.bonus=0;this.currentStep="beginning";this.init()}};$(document).ready(function(){n.init()})}]);